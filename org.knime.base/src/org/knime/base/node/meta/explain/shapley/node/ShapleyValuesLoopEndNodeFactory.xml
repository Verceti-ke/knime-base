<?xml version="1.0" encoding="utf-8"?>
<knimeNode icon="explainer_icon.png" type="LoopEnd"
	xmlns="http://knime.org/node/v3.6"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://knime.org/node/v3.6 http://knime.org/node/v3.6.xsd">
	<name>Shapley Values Loop End</name>

	<shortDescription>End node for a Shapley Values loop
	</shortDescription>

	<fullDescription>
		<intro>
			Aggregates the predictions per row to explain and calculates the
			Shapley Values for each feature-prediction combination.
			For each
			explained row (top inputs of the Shapley Values Loop Start node),
			this node outputs
			<i>number of prediction columns</i>
			rows where each
			row contains the explanation for one prediction
			column.
			Such an explanation row consists of the four columns "RowId",
			"Target", "Actual prediction", "Deviation from mean prediction" and a
			row for each feature (selected in the Shapley Values Loop Start
			node).
			The meaning of these are the following:
			<ul>
				<li>RowId: The RowId of the row of interest.</li>
				<li>Target: The name of the prediction column that is explained.
				</li>
				<li>Actual prediction: The actual prediction your model created for
					the row of interest.</li>
				<li>Deviation from mean prediction: The difference between the
					prediction of the row of interest and the mean prediction of the
					model. The mean prediction is estimated from the model's
					predictions on the sampling table (bottom input of the Shapley
					Values Loop Start node).</li>
			</ul>
		</intro>

		<tab name="Options">
			<option name="Prediction columns">
				There are two modes for specifying the prediction columns:
				<ul>
					<li>Automatically detect prediction columns: All numeric columns
						that are not feature columns are selected (this is the default).
					</li>
					<li>Manually select prediction columns: You can select which
						columns are prediction columns by either including or excluding
						them.</li>
				</ul>
			</option>

			<option name="Use element names for collection features">
				Each collection or vector column can declare
				names for its contained elements (values).
				However, oftentimes using
				these names might be less informative than using the collection name
				combined with an index.
				If this box is not checked all features from
				a collection/vector column are named with respect to the
				collection/vector column name.
				Note that this happens anyway, if
				there are no element names available or the number of element names
				does not match the actual
				number of values in the collection/vector.
			</option>
		</tab>
	</fullDescription>



	<ports>
		<inPort index="0" name="Table containing the rows to explain.">
			Table containing predictions for the
			perturbed rows produced by the Shapley Values Loop Start node
		</inPort>
		<outPort index="0" name="Table containing the Shapley Values.">Table containing the Shapley Values
			for each feature-prediction combination</outPort>
	</ports>
</knimeNode>
